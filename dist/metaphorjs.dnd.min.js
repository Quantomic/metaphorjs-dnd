'use strict';(function(){function aa(a){return"object"==typeof a&&3===L(a)&&!a.nodeType&&a.constructor===Object}function Ba(a){return!0===a||!1===a}function s(a){return"function"==typeof a}function E(a){return"string"==typeof a||a===""+a}function N(a){return"object"==typeof a&&5===L(a)}function Ca(a){if(null===a||"object"!=typeof a)return!1;a=L(a);return 2<a||-1==a}function P(){}function Ta(a,b,d,c,e,g){e=e||"before";return function(){var h,f;if("instead"==e)return b.apply(d||c,arguments);"before"==
e?(h=b.apply(d||c,arguments),f=!1!==h?a.apply(c||d,arguments):null):(f=a.apply(c||d,arguments),h=b.apply(d||c,arguments));return g?h:f}}function ba(){return!1}function ja(){return!0}function ca(a,b){var d;if(d=b)d=!(b&&Da("(?:^|\\s)"+b+"(?!\\S)").test(a.className));d&&(a.className+=" "+b)}function O(a,b){b&&(a.className=a.className.replace(Da("(?:^|\\s)"+b+"(?!\\S)"),""))}function da(a){var b={top:0,left:0},d=window.document.documentElement;if(!Ua(a)||a===window)return b;a.getBoundingClientRect&&
(b=a.getBoundingClientRect());return{top:b.top+Ea()-d.clientTop,left:b.left+Fa()-d.clientLeft}}function qa(a,b,d,c){return setTimeout(function(){a.apply(b,d||[])},c||0)}function Q(a){if(!a)return!1;var b,d;return"object"!=(d=typeof a)&&"function"!=d?!1:s(b=a.then)?b:!1}function X(a){var b=a.stack||Error().stack;if("undefined"!=typeof console&&console.log)qa(function(){console.log(a);b&&console.log(b)});else throw a;}function M(a,b){return a.getAttribute?a.getAttribute(b):null}function ra(a){if(a&&
void 0!=!a.length&&a!==""+a){for(var b=[],d=-1,c=a.length>>>0;++d!==c;b[d]=a[d]);return b}return a?[a]:[]}function Ga(a){return a===window||a&&a.document&&a.location&&a.alert&&a.setInterval}function sa(a){a=L(a);return 3>a&&-1<a}function Va(a){return a.replace(Wa,function(b){return b.charAt(1).toUpperCase()})}function Ha(a,b,d){var c=F(a,"config"),e;if(c)return c;c={};if(d||null!==(d=M(a,"mjs-config")))for(e in a.removeAttribute("mjs-config"),b=d?ea(d)(b||{}):{},b)c[e]=b[e];b=Xa(a);for(e in b)d=b[e],
c[e]=""===d?!0:d;F(a,"config",c);return c}function Ia(a){var b=window.document.createDocumentFragment(),d,c;E(a)&&(d=window.document.createElement("div"),d.innerHTML=a,a=d.childNodes);if(!a)return b;if(a.nodeType)b.appendChild(a);else if(a.item)for(d=-1,c=a.length>>>0;++d!==c;b.appendChild(a[0]));else for(d=-1,c=a.length;++d!==c;b.appendChild(a[d]));return b}var K=Array.prototype.slice,Ya=Object.prototype.toString,L=function(){var a={"[object String]":0,"[object Number]":1,"[object Boolean]":2,"[object Object]":3,
"[object Function]":4,"[object Array]":5,"[object RegExp]":9,"[object Date]":10};return function(b){if(!b){if(null===b)return 6;if(void 0===b)return 7}var d=a[Ya.call(b)];return void 0===d?-1:1==d&&isNaN(b)?8:d}}(),I=function(){return function b(){var d=!1,c=!1,e=K.call(arguments),g=e.shift(),h,f,l;Ba(e[e.length-1])&&(d=e.pop());Ba(e[e.length-1])&&(c=d,d=e.pop());for(;e.length;)if(h=e.shift())for(f in h)if(h.hasOwnProperty(f)&&void 0!==(l=h[f]))if(c)if(g[f]&&aa(g[f])&&aa(l))b(g[f],l,d,c);else{if(!0===
d||void 0==g[f])aa(l)?(g[f]={},b(g[f],l,d,!0)):g[f]=l}else if(!0===d||void 0==g[f])g[f]=l;return g}}(),w=Function.prototype.bind?function(a,b){return a.bind(b)}:function(a,b){return function(){return a.apply(b,arguments)}},Za=function(){var a,b=function(b){var c={},e=[];0==arguments.length&&(b=!0);return{addFinder:function(b,a,f){e[f?"unshift":"push"]({fn:b,context:a})},add:function(a,h,f){if(c[a]&&!1===c[a].rewritable)return c[a];c[a]={rewritable:"undefined"!=typeof f?f:b,value:h};return h},get:function(b){if(c[b])return c[b].value;
if(e.length){var a,f,l;a=0;for(f=e.length;a<f;a++)if(l=e[a].fn.call(e[a].context,b,this),void 0!==l)return this.add(b,l,!0)}},remove:function(b){var a=c[b];a&&!0===a.rewritable&&delete c[b];return a?a.value:void 0},exists:function(b){return!!c[b]},eachEntry:function(b,a){for(var f in c)b.call(a,c[f].value,f)},destroy:function(){this===a&&(a=null);this.remove=this.exists=this.destroy=this.get=this.add=b=c=null}}};b.global=function(){a||(a=new b(!0));return a};return b}(),ta=function(){var a=function(a,
c,e){e=e||new Za(!1);var g=c?c.length:null;a||(a="undefined"!=typeof global?global:window);var h=function(f){return f&&c&&f.substr(0,g)!=c?c+"."+f:f},f=function(f,b){f=h(f);if(e.exists(f))return e.get(f);if(!b){var m=f.split("."),u,g=m.length,n,p=a;for(u=0;u<g;u++)if(n=m[u],c&&0==u&&n==c)p=a;else{if(void 0===p[n])return;p=p[n]}p&&e.add(f,p);return p}};this.register=function(f,b){var m;m=h(f);var u=m.split("."),g,n=u.pop();g=u.join(".");var p=u.length,k,q=a;if(e[g])m=[e[g],n,m];else{if(0<p)for(g=0;g<
p;g++)k=u[g],c&&0==g&&k==c?q=a:(void 0===q[k]&&(q[k]={}),q=q[k]);m=[q,n,m]}u=m[0];n=m[1];Ca(u)&&void 0===u[n]&&(u[n]=b,e.add(m[2],b));return b};this.exists=function(b){return void 0!==f(b,!0)};this.get=f;this.add=function(f,b){f=h(f);e.add(f,b);return b};this.remove=function(f){f=h(f);e.remove(f)};this.normalize=h;this.makeAlias=function(f,b){f=h(f);b=h(b);var a=e.get(f);void 0!==a&&e.add(b,a)};this.destroy=function(){var f;this===b&&(b=null);e.eachEntry(function(f){f&&f.$destroy&&f.$destroy()});
e.destroy();e=null;for(f in this)this[f]=null}};a.prototype.register=null;a.prototype.exists=null;a.prototype.get=null;a.prototype.add=null;a.prototype.remove=null;a.prototype.normalize=null;a.prototype.makeAlias=null;a.prototype.destroy=null;var b;a.global=function(){b||(b=new a);return b};return a}(),$a=function(a,b){var d=function(){},c;d.prototype=a.prototype;d=new d;c=a.apply(d,b);return Ca(c)||!1===c?c:d},t=function(){var a=function(){this.$super&&this.$super!==P&&this.$super.apply(this,arguments)},
b=function(b,f,a){var $super=b.prototype[f]||("$constructor"==f?b:P)||P;return function(){var f,b=this.$super;this.$super=$super;f=a.apply(this,arguments);this.$super=b;return f}},d=function(a,f,l,d){var c,e,g,n=l.prototype;for(c in f)f.hasOwnProperty(c)&&(g=n[c],e=f[c],a[c]=!s(e)||g&&!s(g)?e:b(l,c,e));d||(a.$plugins=null,a.$pluginMap=null,n.$beforeInit?(a.$beforeInit=n.$beforeInit.slice(),a.$afterInit=n.$afterInit.slice(),a.$beforeDestroy=n.$beforeDestroy.slice(),a.$afterDestroy=n.$afterDestroy.slice()):
(a.$beforeInit=[],a.$afterInit=[],a.$beforeDestroy=[],a.$afterDestroy=[]))},c=function(b,f){for(var a in f)f.hasOwnProperty(a)&&("$beforeInit"==a?b.$beforeInit.push(f[a]):"$afterInit"==a?b.$afterInit.push(f[a]):"$beforeDestroy"==a?b.$beforeDestroy.push(f[a]):"$afterDestroy"==a?b.$afterDestroy.push(f[a]):b[a]||(b[a]=f[a]))},e=function(b){b||(b=new ta);var f=function(f){return function(){var a=[],d=[],l=arguments,c,r,e,m,g,s;if(!this)throw"Must instantiate via new: "+f;this.$plugins=[];(c=this.$constructor.apply(this,
arguments))&&N(c)&&(l=c);e=this.$plugins;g=this.$pluginMap={};c=-1;for(r=this.$beforeInit.length;++c<r;a.push([this.$beforeInit[c],this]));c=-1;for(r=this.$afterInit.length;++c<r;d.push([this.$afterInit[c],this]));if(e&&e.length)for(c=0,r=e.length;c<r;c++){m=e[c];if(E(m)&&(s=m,m=b.get(m,!0),!m))throw s+" not found";m=new m(this,l);g[m.$class]=m;m.$beforeHostInit&&a.push([m.$beforeHostInit,m]);m.$afterHostInit&&d.push([m.$afterHostInit,m]);e[c]=m}c=-1;for(r=a.length;++c<r;a[c][0].apply(a[c][1],l));
this.$init&&this.$init.apply(this,l);c=-1;for(r=d.length;++c<r;d[c][0].apply(d[c][1],l));}},l=function(){};I(l.prototype,{$class:null,$extends:null,$plugins:null,$pluginMap:null,$mixins:null,$destroyed:!1,$constructor:P,$init:P,$beforeInit:[],$afterInit:[],$beforeDestroy:[],$afterDestroy:[],$getClass:function(){return this.$class},$getParentClass:function(){return this.$extends},$intercept:function(f,b,a,c,d){var l=this[f];this[f]=Ta(l,b,a||this,this,c,d);return l},$implement:function(f){var b=this.constructor;
b&&b.$parent&&d(this,f,b.$parent)},$hasPlugin:function(f){return!!this.$pluginMap[b.normalize(f)]},$getPlugin:function(f){return this.$pluginMap[b.normalize(f)]||null},$destroy:function(){var f=this.$beforeDestroy,b=this.$afterDestroy,a=this.$plugins,c,d,l;if(!this.$destroyed){this.$destroyed=!0;c=-1;for(d=f.length;++c<d;f[c].apply(this,arguments));c=0;for(d=a.length;c<d;c++)a[c].$beforeHostDestroy&&a[c].$beforeHostDestroy.call(a[c],arguments);l=this.destroy.apply(this,arguments);c=-1;for(d=f.length;++c<
d;b[c].apply(this,arguments));c=0;for(d=a.length;c<d;c++)a[c].$destroy.apply(a[c],arguments);if(!1!==l)for(c in this)this.hasOwnProperty(c)&&(this[c]=null);this.$destroyed=!0}},destroy:function(){}});l.$self=l;l.$instantiate=function(){var f=arguments;switch(f.length){case 0:return new this;case 1:return new this(f[0]);case 2:return new this(f[0],f[1]);case 3:return new this(f[0],f[1],f[2]);case 4:return new this(f[0],f[1],f[2],f[3]);default:return $a(this,f)}};l.$override=function(f){var b=this.$self,
a=this.$parent;b&&a&&d(b.prototype,f,a)};l.$extend=function(f,b){return r(f,b,this)};l.$destroy=function(){for(var f in this)this[f]=null};var r=function(r,e,m){r=r||{};var g=r.$class,k=m||r.$extends,q=r.$mixins,s,z,A;k?E(k)?m=b.get(k):(m=k,k=m.$class||""):(m=l,k="");if(k&&!m)throw k+" not found";g&&(g=b.normalize(g));r.$class=g;r.$extends=k;r.$mixins=null;s=function(){};s.prototype=m.prototype;k=new s;s=null;r.$constructor=r.$constructor||a;d(k,r,m);if(q)for(r=0,s=q.length;r<s;r++)A=q[r],E(A)&&(A=
b.get(A,!0)),c(k,A);q=f(g);k.constructor=q;q.prototype=k;for(z in l)"prototype"!=z&&l.hasOwnProperty(z)&&(q[z]=l[z]);for(z in m)"prototype"!=z&&m.hasOwnProperty(z)&&(q[z]=m[z]);if(e)for(z in e)"prototype"!=z&&e.hasOwnProperty(z)&&(q[z]=e[z]);q.$parent=m;q.$self=q;g&&b.register(g,q);return q},m=this;m.factory=function(f){var a=b.get(f),c=K.call(arguments,1);if(!a)throw f+" not found";return a.$instantiate.apply(a,c)};m.isSubclassOf=function(f,a){var c=f,d=b.get;a=E(a)?b.normalize(a):a.prototype.$class;
for(E(f)&&(c=d(b.normalize(f)));c&&c.prototype;){if(c.prototype.$class==a)return!0;c=c.$parent}return!1};m.isInstanceOf=function(f,a){var c=E(a)?b.get(a):a;return c?f instanceof c:!1};m.define=r;m.destroy=function(){m===g&&(g=null);l.$destroy();l=null;b.destroy();e=b=null};m.BaseClass=l};e.prototype={factory:null,isSubclassOf:null,isInstanceOf:null,define:null,destroy:null};var g;e.global=function(){g||(g=new e(ta.global()));return g};return e}(),fa=new ta({},"MetaphorJs"),Y=(new t(fa)).define,Z=
function(a){if(a instanceof Z)return a;if(!(this instanceof Z))return new Z(a);for(var b in a)if(!this[b])try{this[b]=a[b]}catch(d){}this.originalEvent=a;this.type=a.type;!this.target&&a.srcElement&&(this.target=a.srcElement);var c,e=a.button;void 0===this.pageX&&null!==a.clientX&&(c=this.target?this.target.ownerDocument||window.document:window.document,b=c.documentElement,c=c.body,this.pageX=a.clientX+(b&&b.scrollLeft||c&&c.scrollLeft||0)-(b&&b.clientLeft||c&&c.clientLeft||0),this.pageY=a.clientY+
(b&&b.scrollTop||c&&c.scrollTop||0)-(b&&b.clientTop||c&&c.clientTop||0));this.which||void 0===e||(this.which=e&1?1:e&2?3:e&4?2:0);this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&!1===a.returnValue?ja:ba;this.timeStamp=a&&a.timeStamp||(new Date).getTime()};I(Z.prototype,{isDefaultPrevented:ba,isPropagationStopped:ba,isImmediatePropagationStopped:ba,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=ja;a.returnValue=!1;a&&a.preventDefault&&a.preventDefault()},
stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=ja;a&&a.stopPropagation&&a.stopPropagation()},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=ja;a&&a.stopImmediatePropagation&&a.stopImmediatePropagation();this.stopPropagation()}},!0,!1);var Ja=function(a){function b(){c=null}var d,c;a=function(a){return function(g){var h=new Z(g||window.event),f=K.call(arguments,1),l=0,r=0,m=0,u=0,y=0,n=0;h.type="mousewheel";"detail"in h&&
(m=-1*h.detail);"wheelDelta"in h&&(m=h.wheelDelta);"wheelDeltaY"in h&&(m=h.wheelDeltaY);"wheelDeltaX"in h&&(r=-1*h.wheelDeltaX);"axis"in h&&h.axis===h.HORIZONTAL_AXIS&&(r=-1*m,m=0);l=0===m?r:m;"deltaY"in h&&(l=m=-1*h.deltaY);"deltaX"in h&&(r=h.deltaX,0===m&&(l=-1*r));if(0!==m||0!==r){u=Math.max(Math.abs(m),Math.abs(r));if(!c||u<c)c=u,"mousewheel"===h.type&&0===u%120&&(c/=40);"mousewheel"===h.type&&0===u%120&&(l/=40,r/=40,m/=40);l=Math[1<=l?"floor":"ceil"](l/c);r=Math[1<=r?"floor":"ceil"](r/c);m=Math[1<=
m?"floor":"ceil"](m/c);this.getBoundingClientRect&&(u=this.getBoundingClientRect(),y=h.clientX-u.left,n=h.clientY-u.top);h.deltaX=r;h.deltaY=m;h.deltaFactor=c;h.offsetX=y;h.offsetY=n;h.deltaMode=0;f.unshift(h,l,r,m);d&&clearTimeout(d);d=setTimeout(b,200);return a.apply(this,f)}}};a.events=function(){var b=window.document;return"onwheel"in b||9<=b.documentMode?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"]};return a}(),W=function(){var a=null,b=null;return function(d,c,e){null===a&&
(a=d.attachEvent?"attachEvent":"addEventListener",b=d.attachEvent?"on":"");if("mousewheel"==c){e=Ja(e);c=Ja.events();var g,h;g=0;for(h=c.length;g<h;g++)d[a](b+c[g],e,!1)}else d[a](b+c,e,!1);return e}}(),ua=function(){var a=null,b=null;return function(d,c,e){null===a&&(a=d.detachEvent?"detachEvent":"removeEventListener",b=d.detachEvent?"on":"");d[a](b+c,e)}}(),Da=function(){var a={};return function(b){return a[b]||(a[b]=new RegExp(b))}}(),Ua=function(){return function b(d){if(d===window)return!0;if(3==
d.nodeType)return d.parentElement?b(d.parentElement):!0;var c=window.document.documentElement;return d===c?!0:c.contains(d)}}(),t=function(a){var b,d=a?"pageYOffset":"pageXOffset",c=a?"scrollTop":"scrollLeft";a=window.document;var e=a.body,g=a.documentElement;b=void 0!==window[d]?function(){return window[d]}:g.clientHeight?function(){return g[c]}:function(){return e[c]};return function(a){return a&&a!==window?a&&1==a.nodeType&&a!==e&&a!==g?a[c]:b():b()}},Ea=t(!0),Fa=t(!1),J=function(a,b,d){if(window.getComputedStyle){if(a===
window)return b?d?0:null:{};a=getComputedStyle(a,null)}else a=a.currentStyle||a.style||{};b=b?a[b]:a;return d?parseFloat(b)||0:b},ab=function(){var a;return function(){if(void 0===a){var b=window.document,d=b.createElement("div"),c=b.createElement("div"),b=b.body;c.style&&window.getComputedStyle?(d.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",d.appendChild(c),c.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",
c.innerHTML="",b.appendChild(d),c="4px"===window.getComputedStyle(c,null).width,b.removeChild(d),a=c):a=!1}return a}}(),t=function(a,b){var d=/^([+-]?(?:d*.|)d+(?:[eE][+-]?d+|))(?!px)[a-z%]+$/i,c=["Top","Right","Bottom","Left"],e=a?"inner"==a?"padding":"":"content";return function(a,h){if(a===window)return a.document.documentElement["client"+b];if(9===a.nodeType){var f=a.documentElement;return Math.max(a.body["scroll"+b],f["scroll"+b],a.body["offset"+b],f["offset"+b],f["client"+b])}a:{var l=b.toLowerCase(),
r=e||(!0===h?"margin":"border"),f=J(a),m=!0,u="width"===l?a.offsetWidth:a.offsetHeight,y="border-box"===f.boxSizing;if(0>=u||null==u){u=a.style[l];if(d.test(u)){f=u;break a}m=y&&(ab()||u===a.style[l]);u=parseFloat(u)||0}r=r||(y?"border":"content");l=r===(m?"border":"content")?4:"width"===l?1:0;for(y=0;4>l;l+=2)"margin"===r&&(y+=parseFloat(f[r+c[l]])),m?("content"===r&&(y-=parseFloat(f["padding"+c[l]])),"margin"!==r&&(y-=parseFloat(f["border"+c[l]+"Width"]))):(y+=parseFloat(f["padding"+c[l]]),"padding"!==
r&&(y+=parseFloat(f["border"+c[l]+"Width"])));f=u+y}return f}},la=t("outer","Width"),ma=t("outer","Height"),na=function(){var a=["Moz","Webkit","ms","O","Khtml"],b="animationDelay",d="animationDuration",c="transitionDelay",e="transitionDuration",g="transform",h=null,f=null,l=!1;return function(){if(!l){var r=window.document.createElement("div"),m=!1,u,y,n;if(void 0!==r.style.animationName)m=!0;else for(y=0,n=a.length;y<n;y++)if(u=a[y],void 0!==r.style[u+"AnimationName"]){m=!0;b=u+"AnimationDelay";
d=u+"AnimationDuration";c=u+"TransitionDelay";e=u+"TransitionDuration";g=u+"Transform";break}m&&("ontransitionend"in window?h="transitionend":"onwebkittransitionend"in window&&(h="webkitTransitionEnd"));f=m?{animationDelay:b,animationDuration:d,transitionDelay:c,transitionDuration:e,transform:g,transitionend:h}:{};l=!0}return f}}(),Ka=function(){var a=function(f){if(!f)return 0;var a=parseFloat(f);-1==f.indexOf("ms")&&(a*=1E3);return a},b=function(f,b,c){var d,h,e=b.length;for(d=0;d<e;d++)h=a(b[d])+
a(c[d]),f=Math.max(h,f);return f},d=!1,c=null,e=null,g=null,h=null;return function(f){!1===d&&(c=(d=na())?d.animationDuration:null,e=d?d.animationDelay:null,g=d?d.transitionDuration:null,h=d?d.transitionDelay:null);if(!d)return 0;var a=window.getComputedStyle?window.getComputedStyle(f,null):f.style;f=0;var r=(a[c]||"").split(","),m=(a[e]||"").split(","),u=(a[g]||"").split(","),a=(a[h]||"").split(",");f=Math.max(f,b(f,r,m));return f=Math.max(f,b(f,u,a))}}(),oa=function(){var a=["0","0","0"];return function(){for(var b=
a.length,d;b;){b--;d=a[b].charCodeAt(0);if(57==d)return a[b]="A",a.join("");if(90==d)a[b]="0";else return a[b]=String.fromCharCode(d+1),a.join("")}a.unshift("0");return a.join("")}}(),F=function(){var a={};return function(b,d,c){b=b._mjsid||(b._mjsid=oa());var e=a[b];return void 0!==c?(e||(e=a[b]={}),e[d]=c):e?e[d]:void 0}}(),bb=function(a){var b=F(a,"mjsAnimationQueue"),d,c;if(N(b)&&b.length){if(b=b[0])b.stages&&(d=b.position,c=b.stages,O(a,c[d]),O(a,c[d]+"-active")),b.deferred&&b.deferred.reject(b.el)}else s(b)?
b(a):"stop"==b&&$(a).stop(!0,!0);F(a,"mjsAnimationQueue",null)},va=function(){var a=[],b=!1,d="undefined"!=typeof process?process.nextTick:function(f){setTimeout(f,0)},c=function(){b=!0;var f=a.shift();d(function(){f[0].apply(f[1],f[2]);a.length?c():b=!1},0)},e=function(f,d,h){h=h||[];a.push([f,d,h]);b||c()},g=function(f,a){return function(b){try{a.resolve(f(b))}catch(c){a.reject(c)}}},h=function(f,a){if(f instanceof h)return f;if(!(this instanceof h))return new h(f,a);var b;this._fulfills=[];this._rejects=
[];this._dones=[];this._fails=[];if(0<arguments.length)if(b=Q(f))f instanceof h?f.then(w(this.resolve,this),w(this.reject,this)):(new h(b,f)).then(w(this.resolve,this),w(this.reject,this));else if(s(f))try{f.call(a,w(this.resolve,this),w(this.reject,this))}catch(c){this.reject(c)}else this.resolve(f)};I(h.prototype,{_state:0,_fulfills:null,_rejects:null,_dones:null,_fails:null,_wait:0,_value:null,_reason:null,_triggered:!1,isPending:function(){return 0==this._state},isFulfilled:function(){return 1==
this._state},isRejected:function(){return 2==this._state},_cleanup:function(){this._fails=this._dones=this._rejects=this._fulfills=null},_processValue:function(f,a){var b;if(0==this._state)if(f===this)this._doReject(new TypeError("cannot resolve promise with itself"));else{try{if(b=Q(f)){f instanceof h?f.then(w(this._processResolveValue,this),w(this._processRejectReason,this)):(new h(b,f)).then(w(this._processResolveValue,this),w(this._processRejectReason,this));return}}catch(c){0==this._state&&this._doReject(c);
return}a.call(this,f)}},_callResolveHandlers:function(){this._done();for(var a=this._fulfills,b;b=a.shift();)e(b[0],b[1],[this._value]);this._cleanup()},_doResolve:function(a){this._value=a;this._state=1;0==this._wait&&this._callResolveHandlers()},_processResolveValue:function(a){this._processValue(a,this._doResolve)},resolve:function(a){if(this._triggered)return this;this._triggered=!0;this._processResolveValue(a);return this},_callRejectHandlers:function(){this._fail();for(var a=this._rejects,b;b=
a.shift();)e(b[0],b[1],[this._reason]);this._cleanup()},_doReject:function(a){this._state=2;this._reason=a;0==this._wait&&this._callRejectHandlers()},_processRejectReason:function(a){this._processValue(a,this._doReject)},reject:function(a){if(this._triggered)return this;this._triggered=!0;this._processRejectReason(a);return this},then:function(a,b){var c=new h,d=this._state;0==d||0!=this._wait?(a&&s(a)?this._fulfills.push([g(a,c),null]):this._fulfills.push([c.resolve,c]),b&&s(b)?this._rejects.push([g(b,
c),null]):this._rejects.push([c.reject,c])):1==d?a&&s(a)?e(g(a,c),null,[this._value]):c.resolve(this._value):2==d&&(b&&s(b)?e(g(b,c),null,[this._reason]):c.reject(this._reason));return c},"catch":function(a){return this.then(null,a)},_done:function(){for(var a=this._dones,b;b=a.shift();)try{b[0].call(b[1]||null,this._value)}catch(c){X(c)}},done:function(a,b){var c=this._state;if(1==c&&0==this._wait)try{a.call(b||null,this._value)}catch(d){X(d)}else 0==c&&this._dones.push([a,b]);return this},_fail:function(){for(var a=
this._fails,b;b=a.shift();)try{b[0].call(b[1]||null,this._reason)}catch(c){X(c)}},fail:function(a,b){var c=this._state;if(2==c&&0==this._wait)try{a.call(b||null,this._reason)}catch(d){X(d)}else 0==c&&this._fails.push([a,b]);return this},always:function(a,b){this.done(a,b);this.fail(a,b);return this},promise:function(){return{then:w(this.then,this),done:w(this.done,this),fail:w(this.fail,this),always:w(this.always,this)}},after:function(a){var b=this;if(Q(a)){b._wait++;var c=function(){b._wait--;0==
b._wait&&0!=b._state&&(1==b._state?b._callResolveHandlers():b._callRejectHandlers())};s(a.done)?a.done(c):a.then(c)}return b}},!0,!1);h.fcall=function(a,b,c){return h.resolve(a.apply(b,c||[]))};h.resolve=function(a){var b=new h;b.resolve(a);return b};h.reject=function(a){var b=new h;b.reject(a);return b};h.all=function(a){if(!a.length)return h.resolve(null);var b=new h,c=a.length,d=Array(c),e=c,g,n,p=function(a,f){d[f]=a;e--;0==e&&b.resolve(d)};for(g=0;g<c;g++)(function(c){n=a[g];n instanceof h?n.done(function(a){p(a,
c)}).fail(b.reject,b):Q(n)||s(n)?(new h(n)).done(function(a){p(a,c)}).fail(b.reject,b):p(n,c)})(g);return b};h.when=function(){return h.all(arguments)};h.allResolved=function(a){if(!a.length)return h.resolve(null);var b=new h,c=a.length,d=[],e=c,g,n,p=function(a){d.push(a);k()},k=function(){e--;0==e&&b.resolve(d)};for(g=0;g<c;g++)n=a[g],n instanceof h?n.done(p).fail(k):Q(n)||s(n)?(new h(n)).done(p).fail(k):p(n);return b};h.race=function(a){if(!a.length)return h.resolve(null);var b=new h,c=a.length,
d,e;for(d=0;d<c&&(e=a[d],e instanceof h?e.done(b.resolve,b).fail(b.reject,b):Q(e)||s(e)?(new h(e)).done(b.resolve,b).fail(b.reject,b):b.resolve(e),b.isPending());d++);return b};h.waterfall=function(a){if(!a.length)return h.resolve(null);for(var b=a.shift(),b=s(b)?h.fcall(b):h.resolve(c),c;c=a.shift();)Q(c)?b=b.then(function(a){return function(){return a}}(c)):s(c)?b=b.then(c):b.resolve(c);return b};h.counter=function(a){var b=new h;b.countdown=function(){a--;0==a&&b.resolve()};return b};return h}(),
ga=function(){var a,b;if("undefined"!=typeof window){var d=window;a=d.requestAnimationFrame||d.webkitRequestAnimationFrame||d.mozRequestAnimationFrame;b=d.cancelAnimationFrame||d.webkitCancelAnimationFrame||d.mozCancelAnimationFrame||d.webkitCancelRequestAnimationFrame;if(a)return function(c){var d=a(c);return function(){b(d)}}}return function(a){var b=setTimeout(a,0);return function(){clearTimeout(b)}}}(),xa=function(){var a={show:["mjs-show"],hide:["mjs-hide"],enter:["mjs-enter"],leave:["mjs-leave"],
move:["mjs-move"]},b=0,d=!1,c=!1,e=function(a,b,f){var c=function(){(new Date).getTime()-b>=f?a():ga(c)};ga(c)},g=function(){!1===d&&(d=na(),c=!!d);return c},h=function r(a,b,f,c,d,g,q,s){var z=function(){var b=F(a,"mjsAnimationQueue");return b&&b.length&&b[0].id==q?!1:(d.reject(a),!0)},A=function(){if(!z()){var c=f;f++;if(f==b.length){d.resolve(a);F(a,"mjsAnimationQueue").shift();var e=F(a,"mjsAnimationQueue");e.length?(e=e[0],h(e.el,e.stages,0,e.start,e.deferred,!1,e.id,e.step)):F(a,"mjsAnimationQueue",
null)}else F(a,"mjsAnimationQueue")[0].position=f,r(a,b,f,null,d,!1,q,s);O(a,b[c]);O(a,b[c]+"-active")}},w=function(){z()||(ca(a,b[f]+"-active"),va.resolve(s&&s(a,f,"active")).done(function(){if(!z()){var b=Ka(a);b?e(A,(new Date).getTime(),b):ga(A)}}))},R=function(){z()||(ca(a,b[f]),va.waterfall([s&&s(a,f,"start"),function(){return c?c(a):null}]).done(function(){!z()&&ga(w)}))};g?ga(R):R()},f=function(f,c,d,e,n,p){var k=new va,q=F(f,"mjsAnimationQueue")||[],w=++b,z=M(f,"mjs-animate"),A,t,R,pa,v,D,
wa;c=c||z;e&&null===z&&(c=null);if(c){E(c)?"["==c.substr(0,1)?A=(new Function("","return "+c))():(A=a[c],c=n&&n.get("animate."+c,!0)):s(c)?t=c:N(c)&&(E(c[0])?A=c:(R=c[0],pa=c[1]));aa(c)&&(A=c.stages,t=c.fn,R=c.before,pa=c.after,v=c.options?I({},c.options):{},D=c.context||null,wa=c.duration||null,d=d||v.start);if(g()&&A)return q.push({el:f,stages:A,start:d,step:p,deferred:k,position:0,id:w}),F(f,"mjsAnimationQueue",q),1==q.length&&h(f,A,0,d,k,!0,w,p),k;v=v||{};d&&(v.start=function(){d(f)});v.complete=
function(){k.resolve(f)};wa&&(v.duration=wa);if(t&&s(t))return R&&I(f.style,R,!0,!1),d&&d(f),F(f,"mjsAnimationQueue",t.call(D,f,function(){k.resolve(f)})),k;if(window.jQuery){c=$(f);R&&c.css(R);F(f,"mjsAnimationQueue","stop");if(t&&E(t))return c[t](v),k;if(pa)return c.animate(pa,v),k}}d?(t=d(f),Q(t)?t.done(function(){k.resolve(f)}):k.resolve(f)):k.resolve(f);return k};f.addAnimationType=function(b,f){a[b]=f};f.stop=bb;f.getPrefixes=na;f.getDuration=Ka;f.cssAnimationSupported=g;return f}(),cb=function(){var a;
return function(){if(null===a){var b=navigator.userAgent;a=parseInt((/msie (\d+)/i.exec(b)||[])[1],10);isNaN(a)&&(a=parseInt((/trident\/.*; rv:(\d+)/i.exec(b)||[])[1],10)||!1)}return a}}(),db=function(){var a={},b;return function(d){if(void 0===a[d]){if("input"==d&&9==cb())return a[d]=!1;b||(b=window.document.createElement("div"));a[d]=!!("on"+d in b)}return a[d]}}(),ya=function(){var a=/^[\w[:#.][\w\]*^|=!]*$/,b=/=([^\]]+)/,d=/ *, */,c=/(\([^)]*)\+/,e=/(\[[^\]]+)~/,g=/(~|>|\+)/,h=/ +/,f=/([^[:.#]+)?(?:#([^[:.#]+))?(?:\.([^[:.]+))?(?:\[([^!&^*|$[:=]+)([!$^*|&]?=)?([^:\]]+)?\])?(?::([^(]+)(?:\(([^)]+)\))?)?/,
l=/(?:(-?\d*)n)?(?:(%|-)(\d*))?/,r=/\D/,m=/[^(]*\(([^)]*)\)/,u=/\(.*/,y=/\[([^!~^*|$ [:=]+)([$^*|]?=)?([^ :\]]+)?\]/,n=window.document,p=!!n.getElementsByClassName,k=!!n.querySelectorAll,q={"first-child":function(a){return a.parentNode.getElementsByTagName("*")[0]!==a},"last-child":function(a){for(;(a=a.nextSibling)&&1!=a.nodeType;);return!!a},root:function(a){return"html"!==a.nodeName.toLowerCase()},"nth-child":function(a,b){var f=a.nodeIndex||0,c=b[3]=b[3]?("%"===b[2]?-1:1)*b[3]:0,d=b[1];if(f)return!((f+
c)%d);var h=a.parentNode.firstChild;f++;do if(1==h.nodeType&&(h.nodeIndex=++f)&&a===h&&(f+c)%d)return 0;while(h=h.nextSibling);return 1},"nth-last-child":function(a,b){var f=a.nodeIndexLast||0,c=b[3]?("%"===b[2]?-1:1)*b[3]:0,d=b[1];if(f)return!((f+c)%d);var h=a.parentNode.lastChild;f++;do if(1==h.nodeType&&(h.nodeLastIndex=f++)&&a===h&&(f+c)%d)return 0;while(h=h.previousSibling);return 1},empty:function(a){return!!a.firstChild},parent:function(a){return!a.firstChild},"only-child":function(a){return 1!=
a.parentNode.getElementsByTagName("*").length},checked:function(a){return!a.checked},lang:function(a,b){return a.lang!==b&&n.documentElement.lang!==b},enabled:function(a){return a.disabled||"hidden"===a.type},disabled:function(a){return!a.disabled},selected:function(a){return!a.selected}},s={},z=function(a){return s[a]||(s[a]=new RegExp("(^| +)"+a+"($| +)"))},A={"":function(a,b){return null!==M(a,b)},"=":function(a,b,f){var c;return(c=M(a,b))&&c===f},"&=":function(a,b,f){var c;return(c=M(a,b))&&z(f).test(c)},
"^=":function(a,b,f){var c;return(c=M(a,b)+"")&&!c.indexOf(f)},"$=":function(a,b,f){var c;return(c=M(a,b)+"")&&c.indexOf(f)==c.length-f.length},"*=":function(a,b,f){var c;return(c=M(a,b)+"")&&-1!=c.indexOf(f)},"|=":function(a,b,f){var c;return(c=M(a,b)+"")&&(c===f||!!c.indexOf(f+"-"))},"!=":function(a,b,f){var c;return!(c=M(a,b))||!z(f).test(c)}},t=function(s,z){z=z||n;var v=[],D=null,t,w,E,x,F,G,H;if(k)try{v=ra(z.querySelectorAll(s.replace(b,'="$1"')))}catch(I){D=!0}if(!k||D)if(a.test(s))switch(D=
0,s.charAt(0)){case "#":D=s.slice(1);v=n.getElementById(D);v.id!==D&&(v=n.all[D]);v=v?[v]:[];break;case ".":t=s.slice(1);if(p)v=ra((v=z.getElementsByClassName(t)).length?v:[]);else{t=" "+t+" ";w=z.getElementsByTagName("*");for(E=0;x=w[E++];)-1!=(" "+x.className+" ").indexOf(t)&&(v[D++]=x);v=D?v:[]}break;case ":":w=z.getElementsByTagName("*");E=0;F=s.replace(m,"$1");for(G=s.replace(u,"");x=w[E++];)q[G]&&!q[G](x,F)&&(v[D++]=x);v=D?v:[];break;case "[":w=z.getElementsByTagName("*");E=0;x=y.exec(s);t=
x[1];H=x[2]||"";for(F=x[3];x=w[E++];)A[H]&&(A[H](x,t,F)||"class"===t&&A[H](x,"className",F))&&(v[D++]=x);v=D?v:[];break;default:v=ra((v=z.getElementsByTagName(s)).length?v:[])}else{for(var J=s.split(d),L=J.length-1,N=!!L,M,P,C,O,S,T,U,V,Q,B,K,ka;D=J[L--];){P=(M=D.replace(c,"$1%").replace(e,"$1&").replace(g," $1 ").split(h)).length;E=0;O=" ";for(w=[z];C=M[E++];)if(" "!==C&&">"!==C&&"~"!==C&&"+"!==C&&w){C=C.match(f);S=C[1]||"*";T=C[2];U=C[3]?" "+C[3]+" ":"";t=C[4];H=C[5]||"";G=C[7];F="nth-child"===
G||"nth-last-child"===G?l.exec("even"===C[8]&&"2n"||"odd"===C[8]&&"2n%1"||!r.test(C[8])&&"0n%"+C[8]||C[8]):C[8];V=[];D=Q=0;for(K=E==P;B=w[Q++];)switch(O){case " ":ka=B.getElementsByTagName(S);for(B=0;x=ka[B++];)T&&x.id!==T||U&&-1==(" "+x.className+" ").indexOf(U)||!(!t||A[H]&&(A[H](x,t,C[6])||"class"===t&&A[H](x,"className",C[6])))||x.yeasss||(q[G]?q[G](x,F):G)||(K&&(x.yeasss=1),V[D++]=x);break;case "~":for(S=S.toLowerCase();(B=B.nextSibling)&&!B.yeasss;)1!=B.nodeType||"*"!==S&&B.nodeName.toLowerCase()!==
S||T&&B.id!==T||U&&-1==(" "+B.className+" ").indexOf(U)||!(!t||A[H]&&(A[H](x,t,C[6])||"class"===t&&A[H](x,"className",C[6])))||B.yeasss||(q[G]?q[G](B,F):G)||(K&&(B.yeasss=1),V[D++]=B);break;case "+":for(;(B=B.nextSibling)&&1!=B.nodeType;);!B||B.nodeName.toLowerCase()!==S.toLowerCase()&&"*"!==S||T&&B.id!==T||U&&-1==(" "+x.className+" ").indexOf(U)||!(!t||A[H]&&(A[H](x,t,C[6])||"class"===t&&A[H](x,"className",C[6])))||B.yeasss||(q[G]?q[G](B,F):G)||(K&&(B.yeasss=1),V[D++]=B);break;case ">":for(ka=B.getElementsByTagName(S),
E=0;x=ka[E++];)x.parentNode!==B||T&&x.id!==T||U&&-1==(" "+x.className+" ").indexOf(U)||!(!t||A[H]&&(A[H](x,t,C[6])||"class"===t&&A[H](x,"className",C[6])))||x.yeasss||(q[G]?q[G](x,F):G)||(K&&(x.yeasss=1),V[D++]=x)}w=V}else O=C;if(N){if(!w.concat){V=[];for(B=0;x=w[B];)V[B++]=x;w=V}v=w.concat(1==v.length?v[0]:v)}else v=w}for(D=v.length;D--;)v[D].yeasss=v[D].nodeIndex=v[D].nodeIndexLast=null}return v};t.is=function(a,b){var f=t(b,a.parentNode),c,d;c=-1;for(d=f.length;++c<d;)if(f[c]===a)return!0;return!1};
return t}(),La=function(){var a=function(a,d,c,e,g){this.name=a;this.listeners=[];this.map={};this.hash=oa();this.uni="$$"+a+"_"+this.hash;this.suspended=!1;this.lid=0;"object"==typeof d&&null!==d?I(this,d,!0,!1):(this.returnResult=void 0===d?null:d,this.autoTrigger=c,this.triggerFilter=e,this.filterContext=g)};I(a.prototype,{name:null,listeners:null,map:null,hash:null,uni:null,suspended:!1,lid:null,returnResult:null,autoTrigger:null,lastTrigger:null,triggerFilter:null,filterContext:null,getName:function(){return this.name},
destroy:function(){for(var a in this)this[a]=null},on:function(a,d,c){if(!a)return null;d=d||null;c=c||{};var e=this.uni,g=d||a;if(g[e]&&!c.allowDupes)return null;var h=++this.lid,f=c.first||!1;g[e]=h;a={fn:a,context:d,uniContext:g,id:h,called:0,limit:0,start:1,count:0,append:null,prepend:null};I(a,c,!0,!1);f?this.listeners.unshift(a):this.listeners.push(a);this.map[h]=a;if(this.autoTrigger&&this.lastTrigger&&!this.suspended){var l=this.triggerFilter;this.triggerFilter=function(a){return a.id==h?
l?!1!==l(a):!0:!1};this.trigger.apply(this,this.lastTrigger);this.triggerFilter=l}return h},once:function(a,d,c){c=c||{};c.limit=1;return this.on(a,d,c)},un:function(a,d){var c=-1,e=this.uni,g=this.listeners,h;h=a==parseInt(a)?a:(d||a)[e];if(!h)return!1;for(var f=0,l=g.length;f<l;f++)if(g[f].id==h){c=f;delete g[f].uniContext[e];break}if(-1==c)return!1;g.splice(c,1);delete this.map[h];return!0},hasListener:function(a,d){var c=this.listeners,e;if(a){d=d||a;e=s(a)?d[this.uni]:a;if(!e)return!1;for(var g=
0,h=c.length;g<h;g++)if(c[g].id==e)return!0;return!1}return 0<c.length},removeAllListeners:function(){var a=this.listeners,d=this.uni,c,e;c=0;for(e=a.length;c<e;c++)delete a[c].uniContext[d];this.listeners=[];this.map={}},suspend:function(){this.suspended=!0},resume:function(){this.suspended=!1},_prepareArgs:function(a,d){var c;a.append||a.prepend?(c=K.call(d),a.prepend&&(c=a.prepend.concat(c)),a.append&&(c=c.concat(a.append))):c=d;return c},trigger:function(){var a=this.listeners,d=this.returnResult,
c=this.triggerFilter,e=this.filterContext,g;if(this.suspended)return null;this.autoTrigger&&(this.lastTrigger=K.call(arguments));if(0==a.length)return null;for(var h="all"==d||"merge"==d?[]:null,f,a="first"==d?[a[0]]:K.call(a);f=a.shift();)if(f&&this.map[f.id]&&(g=this._prepareArgs(f,arguments),!c||!1!==c.call(e,f,g,this))&&(f.count++,!(f.count<f.start)))if(g=f.fn.apply(f.context,g),f.called++,f.called==f.limit&&this.un(f.id),"all"==d)h.push(g);else if("merge"==d&&g)h=h.concat(g);else{if("first"==
d||"nonempty"==d&&g)return g;if("last"==d)h=g;else if(!1==d&&!1===g)return!1}if(d)return h}},!0,!1);return a}(),Ma=function(){var a=function(){this.events={}};I(a.prototype,{createEvent:function(a,d,c,e,g){a=a.toLowerCase();var h=this.events;h[a]||(h[a]=new La(a,d,c,e,g));return h[a]},getEvent:function(a){a=a.toLowerCase();return this.events[a]},on:function(a,d,c,e){a=a.toLowerCase();var g=this.events;g[a]||(g[a]=new La(a));return g[a].on(d,c,e)},once:function(a,d,c,e){e=e||{};e.limit=1;return this.on(a,
d,c,e)},un:function(a,d,c){a=a.toLowerCase();var e=this.events;e[a]&&e[a].un(d,c)},hasListener:function(a,d,c){var e=this.events;if(a)return a=a.toLowerCase(),e[a]?e[a].hasListener(d,c):!1;for(a in e)if(e[a].hasListener())return!0;return!1},removeAllListeners:function(a){var d=this.events;d[a]&&d[a].removeAllListeners()},trigger:function(){var a=arguments[0],d=this.events,a=a.toLowerCase();if(!d[a])return null;a=d[a];return a.trigger.apply(a,K.call(arguments,1))},suspendEvent:function(a){a=a.toLowerCase();
var d=this.events;d[a]&&d[a].suspend()},suspendAllEvents:function(){var a=this.events,d;for(d in a)a[d].suspend()},resumeEvent:function(a){a=a.toLowerCase();var d=this.events;d[a]&&d[a].resume()},resumeAllEvents:function(){var a=this.events,d;for(d in a)a[d].resume()},destroyEvent:function(a){var d=this.events;d[a]&&(d[a].removeAllListeners(),d[a].destroy(),delete d[a])},destroy:function(){var a=this.events,d;for(d in a)this.destroyEvent(d);for(d in this)this[d]=null},getApi:function(){if(!this.api){for(var a=
"createEvent getEvent on un once hasListener removeAllListeners trigger suspendEvent suspendAllEvents resumeEvent resumeAllEvents destroyEvent".split(" "),d={},c,e=-1,g=a.length;++e<g;c=a[e],d[c]=w(this[c],this));this.api=d}return this.api}},!0,!1);return a}();fa.register("mixin.Observable",{$$observable:null,$$callbackContext:null,$beforeInit:function(a){this.$$observable=new Ma;if(a&&a.callback){var b=a.callback,d=b.context||b.scope,c;b.context=null;b.scope=null;for(c in b)if(b[c])this.$$observable.on(c,
b[c],d||this);a.callback=null;d&&(this.$$callbackContext=d)}},on:function(){var a=this.$$observable;return a.on.apply(a,arguments)},un:function(){var a=this.$$observable;return a.un.apply(a,arguments)},once:function(){var a=this.$$observable;return a.once.apply(a,arguments)},trigger:function(){var a=this.$$observable;return a.trigger.apply(a,arguments)},$beforeDestroy:function(){this.$$observable.trigger("before-destroy",this)},$afterDestroy:function(){this.$$observable.trigger("destroy",this);this.$$observable.destroy();
this.$$observable=null}});var Na=function(){var a=na().transform,b=db("touchstart"),d=!1,c=function(a,b){a=new Z(a||window.event);var c,d,e,g;if(c=a.touches)for(d=0,e=c.length;d<e;d++)g=c[d].target,(b===g||b.contains(g))&&I(a,c[d],!0,!1);return a},e=function(a){a=new Z(a||window.event);a.preventDefault();a.stopPropagation();return!1},g={draggable:null,blockDocumentEvents:!1,cls:{drag:null},start:{delay:0,distance:0,hold:0,holdThreshold:20,animate:!1},end:{restore:!1,animate:!1},drag:{method:"transform",
axis:null,handle:null},cursor:{position:"click",offsetX:0,offsetY:0},drop:null,events:{"*":{returnValue:!1,stopPropagation:!0,preventDefault:!0}},helper:{destroy:!0,zIndex:9999,tpl:null,fn:null,context:null,appendTo:null,manualPosition:!1,animate:!1},placeholder:{destroy:!0,tpl:null,fn:null,context:null,animate:!1},boundary:null,callback:{context:null,beforestart:null,start:null,beforeend:null,end:null,drag:null,drop:null,destroy:null}};return Y({$class:"Draggable",$mixins:["mixin.Observable"],draggable:null,
dragEl:null,handleEl:null,holderEl:null,delayTmt:null,holdTmt:null,startEvent:null,lastMoveEvent:null,lastPosition:null,enabled:!0,started:!1,distance:!1,state:null,$constructor:function(a){I(a,g,!1,!0);(a.helper.tpl||a.helper.fn)&&this.$plugins.push("draggable.plugin.Helper");(a.placeholder.tpl||a.placeholder.fn)&&this.$plugins.push("draggable.plugin.Placeholder");a.boundary&&this.$plugins.push("draggable.plugin.Boundary");a.drop&&this.$plugins.push("draggable.plugin.Drop");this.$super(a)},$init:function(c){I(this,
c,!0,!1);b&&!d&&this.blockDocumentEvents&&(c=window.document,W(c,"touchstart",e),W(c,"touchmove",e),W(c,"touchend",e),d=!0);a||(this.drag.method="position");this.state={clickX:null,clickY:null,offsetX:null,offsetY:null,x:null,y:null};var f;(f=this.drag.handle)?this.handleEl="string"==typeof f?ya(f).shift()||this.draggable:f||this.draggable:this.handleEl=this.draggable;this.holderEl=this.dragEl=this.draggable;this.draggable.$$draggable=this;this.onMousedownDelegate=w(this.onMousedown,this);this.onMousemoveDelegate=
w(this.onMousemove,this);this.onMouseupDelegate=w(this.onMouseup,this);this.onScrollDelegate=w(this.onScroll,this);this.trigger("init",this);this.enabled&&(this.enabled=!1,this.enable())},getElem:function(){return this.draggable},enable:function(){this.enabled||!1===this.trigger("enable",this)||(this.enabled=!0,this.setStartEvents("bind"))},disable:function(){this.enabled&&!1!==this.trigger("disable",this)&&(this.enabled=!1,this.setStartEvents("unbind"))},setStartEvents:function(a){a="bind"==a?W:
ua;a(this.handleEl,"mousedown",this.onMousedownDelegate);b&&a(this.handleEl,"touchstart",this.onMousedownDelegate)},setMoveEvents:function(a){a="bind"==a?W:ua;var f=document.documentElement,c=this.draggable;a(f,"mousemove",this.onMousemoveDelegate);a(f,"mouseup",this.onMouseupDelegate);a(window,"scroll",this.onScrollDelegate);b&&(a(c,"touchmove",this.onMousemoveDelegate),a(c,"touchend",this.onMouseupDelegate),a(c,"touchcancel",this.onMouseupDelegate))},processEvent:function(a){var b=this.events;if(b=
b[a.type]||b["*"]){if(b.process)return b.process(a);b.stopPropagation&&a.stopPropagation();b.preventDefault&&a.preventDefault();return b.returnValue}},onMousedown:function(a){a=c(a,this.handleEl);this.dragStart(a);return this.processEvent(a)},dragStart:function(a){var b=this.start;if(this.enabled&&!this.started)if(this.startEvent=a,!1===this.trigger("before-start",this,a))this.dragStop(a);else if(this.setMoveEvents("bind"),b.hold)this.holdTmt=qa(this.onAfterDelay,this,[a],b.hold);else if(b.delay)this.delayTmt=
qa(this.onAfterDelay,this,[a],b.delay);else this.onAfterDelay(a)},onAfterDelay:function(a){var b=this.start,c=this.startEvent;this.holdTmt=this.delayTmt=null;this.trigger("after-delay",this,a);b.distance?(this.distance=b.distance,this.state.clickX=c.clientX,this.state.clickY=c.clientY):(this.onActualStart(a),this.dragMove(this.lastMoveEvent||a))},onActualStart:function(a){a=this.startEvent;this.started=!0;this.cacheState();this.trigger("before-actual-start",this,a);this.cls.drag&&ca(this.draggable,
this.cls.drag);this.start.animate&&xa(this.dragEl,["mjs-drag-start"],null,!1);this.trigger("start",this,a)},cacheState:function(){var a=this.startEvent,b=this.draggable,c=this.cursor.position,d=this.state,e=da(b),g;var y,n;g={top:0,left:0};var p=window.document.documentElement;if(b!==window&&b!==p){if("fixed"==J(b,"position"))n=b.getBoundingClientRect();else{y=window.document.documentElement;for(n=b.offsetParent||y;n&&n!=y&&"static"==J(n,"position");)n=n.offsetParent;y=n||y;n=da(b);y!==p&&(g=da(y));
g.top+=J(y,"borderTopWidth",!0);g.left+=J(y,"borderLeftWidth",!0)}g={top:n.top-g.top-J(b,"marginTop",!0),left:n.left-g.left-J(b,"marginLeft",!0)}}d.clickX=a.clientX;d.clickY=a.clientY;d.x=e.left;d.y=e.top;d.offsetX=d.clickX-d.x;d.offsetY=d.clickY-d.y;d.left=g.left;d.top=g.top;d.w=la(b);d.h=ma(b);d.mt=parseInt(J(b,"marginTop"),10);d.ml=parseInt(J(b,"marginLeft"),10);"click"!=c&&(a=la(b),b=ma(b),-1!=c.indexOf("c")&&(d.offsetX=a/2,d.offsetY=b/2),-1!=c.indexOf("t")?d.offsetY=0:-1!=c.indexOf("b")&&(d.offsetY=
b),-1!=c.indexOf("l")?d.offsetX=0:-1!=c.indexOf("r")&&(d.offsetX=a));d.offsetY-=this.cursor.offsetY;d.offsetX-=this.cursor.offsetX},onMousemove:function(a){a=c(a,this.draggable);this.dragMove(a);return this.processEvent(a)},onScroll:function(){this.dragMove(this.lastMoveEvent)},dragMove:function(a){var b=this.state;this.lastMoveEvent=a;if(!this.delayTmt)if(this.holdTmt)b=this.startEvent,(Math.abs(a.clientX-b.clientX)>=this.start.holdThreshold||Math.abs(a.clientY-b.clientY)>=this.start.holdThreshold)&&
this.dragStop(a);else{if(this.distance)if(Math.abs(a.clientX-b.clickX)>=this.distance||Math.abs(a.clientY-b.clickY)>=this.distance){if(this.distance=!1,this.onActualStart(a),!this.started)return}else return;this.lastPosition="transform"==this.drag.method?this.applyTransform(a):this.applyPosition(a);this.trigger("drag",this,a,this.lastPosition)}},calcPosition:function(a){var b=this.state,c={},d=Ea(window),e=Fa(window);c.left=e+a.clientX-b.offsetX-(b.x-b.left);c.top=d+a.clientY-b.offsetY-(b.y-b.top);
c.x=e+a.clientX-b.offsetX;c.y=d+a.clientY-b.offsetY;c.translateX=e+a.clientX-b.offsetX-b.x;c.translateY=d+a.clientY-b.offsetY-b.y;return c},applyTransform:function(b){var c=this.dragEl.style,d="",e=this.drag.axis,g=this.calcPosition(b);this.trigger("correct-position",this,g,"transform",b);"x"!=e&&(d+=" translateY("+g.translateY+"px)");"y"!=e&&(d+=" translateX("+g.translateX+"px)");c[a]=d;return g},applyPosition:function(b,c,d){c=(c||this.dragEl).style;var e=this.drag.axis,g=this.calcPosition(b);this.trigger("correct-position",
this,g,"position",b);"x"!=e&&(c.top=g.top+"px");"y"!=e&&(c.left=g.left+"px");d&&(c[a]="");return g},onMouseup:function(a){a=c(a,this.draggable);this.dragStop(a);return this.processEvent(a)},dragStop:function(a){var b=this;b.setMoveEvents("unbind");var c=b.lastMoveEvent;b.lastMoveEvent=null;b.delayTmt?(clearTimeout(b.delayTmt),b.delayTmt=null):b.holdTmt?(clearTimeout(b.holdTmt),b.holdTmt=null):b.enabled&&b.started&&(b.trigger("before-end",b,c,a),b.end.animate?xa(b.end.restore?b.dragEl:b.holderEl,["mjs-drag-end"],
null,!1,null,function(a,d,e){"active"==e&&b.positionOnStop(c)}).done(b.onEndAnimation,b):b.positionOnStop(c))},positionOnStop:function(a){var b=this.draggable,c;this.cls.drag&&O(b,this.cls.drag);this.end.restore?c=this.applyPosition(this.startEvent,null,!0):b!==this.dragEl?c=this.applyPosition(a,b):"transform"==this.drag.method&&(c=this.applyPosition(a,null,!0));this.started=!1;this.trigger("end",this,a,c||this.lastPosition)},onEndAnimation:function(){this.trigger("end-animation",this)},destroy:function(){this.disable();
this.draggable.$$draggable=null}})}(),eb=ya.is,za=function(){var a={accept:!0,cls:{active:null,over:null},callback:{context:null}},b=[];return Y({$class:"Draggable",$mixins:["mixin.Observable"],droppable:null,enabled:!0,active:!1,accepted:null,$init:function(d){I(d,a,!1,!0);I(this,d,!0,!1);b.push(this);this.trigger("init",this);this.enabled&&(this.enabled=!1,this.enable());this.droppable.$$droppable=this},isEnabled:function(){return this.enabled},enable:function(){this.enabled||!1===this.trigger("enable",
this)||(this.enabled=!0)},disable:function(){this.enabled&&!1!==this.trigger("disable",this)&&(this.enabled=!1)},accepts:function(a){var b=this.accept;if(!0===b||!1===b)return b;if("string"==typeof b)return eb(a.getElem(),b);if(s(b))return b.call(this.$$callbackContext,this,a);a=a.getElem();return b==a},setCurrentDraggable:function(a){return this.accepted===a?!0:this.accepts(a)?(a.on("end",this.releaseDraggable,this),this.cls.active&&ca(this.droppable,this.cls.active),this.active=!0,this.accepted=
a,this.trigger("activate",this,a),!0):!1},setDraggableOver:function(a){this.active&&this.accepted==a&&this.cls.over&&ca(this.droppable,this.cls.over)},setDraggableOut:function(a){this.active&&this.accepted==a&&this.cls.over&&O(this.droppable,this.cls.over)},getCoords:function(){var a=this.droppable,b=da(a),e={};e.x=b.left;e.y=b.top;e.w=la(a);e.h=ma(a);e.x1=e.x+e.w;e.y1=e.y+e.h;return e},drop:function(a){this.active&&this.accepted==a&&this.trigger("drop",this,a)},releaseDraggable:function(a){a.un("end",
this.releaseDraggable,this);this.active=!1;this.accepted=null;this.cls.active&&O(this.droppable,this.cls.active);this.cls.over&&O(this.droppable,this.cls.over);this.trigger("deactivate",this)},destroy:function(){this.droppable.$$droppable=null;this.accepted&&this.releaseDraggable(this.accepted);var a=b.indexOf(this);b.splice(a,1)}},{getAll:function(){return b}})}(),ha=function(){return String.prototype.trim?function(a){return E(a)?a.trim():a}:function(a){return E(a)?a.replace(/^\s\s*/,"").replace(/\s\s*$/,
""):a}}(),Oa=function(a,b,d){var c=a.length,e=b.length,g=0,h=0,f=!1,l=!1,r=[],m;if(!e)return[a];for(;g<c;g++)if(m=a.charAt(g),"\\"==m)g++;else if('"'==m)f=!f;else if("'"==m)l=!l;else if(!f&&!l&&(1==e&&m==b||1<e&&a.substring(g,g+e)==b)){if(a.substr(g-1,e)!=b&&a.substr(g+1,e)!=b||d)r.push(a.substring(h,g).replace("\\"+b,b)),h=g+e;g+=e-1}r.push(a.substring(h).replace("\\"+b,b));return r},Pa=function(){return function b(d,c){if(d===c)return!0;if(null===d||null===c)return!1;if(d!==d&&c!==c)return!0;var e=
typeof d,g;if(e==typeof c&&"object"==e)if(N(d)){if(!N(c))return!1;if((e=d.length)==c.length){for(g=0;g<e;g++)if(!b(d[g],c[g]))return!1;return!0}}else{if(10===L(d))return 10===L(c)&&d.getTime()==c.getTime();if(9===L(d)&&9===L(c))return d.toString()==c.toString();if(Ga(d)||Ga(c)||N(c))return!1;e={};for(g in d)if("$"!=g.charAt(0)&&!s(d[g])){if(!b(d[g],c[g]))return!1;e[g]=!0}for(g in c)if(!e.hasOwnProperty(g)&&"$"!=g.charAt(0)&&void 0!==c[g]&&!s(c[g]))return!1;return!0}return!1}}(),Qa=function(){var a=
"undefined"!=typeof window?window:null,b="undefined"!=typeof global?global:null;return function c(e,g){if(a&&e===a)throw Error("Cannot copy window object");if(b&&e===b)throw Error("Cannot copy global object");if(g){if(e===g)throw Error("Objects are identical");if(N(e))for(var h=g.length=0,f=e.length;h<f;h++)g.push(c(e[h]));else{for(h in g)delete g[h];for(h in e)e.hasOwnProperty(h)&&("$"==h.charAt(0)||s(e[h])?g[h]=e[h]:g[h]=c(e[h]))}}else(g=e)&&(N(e)?g=c(e,[]):10===L(e)?g=new Date(e.getTime()):9===
L(e)?g=new RegExp(e.source):aa(e)&&(g=c(e,{})));return g}}(),fb=function(){var a=Object.prototype.toString,b=Function.prototype.toString,d=/^\[object .+?Constructor\]$/,c=RegExp("^"+String(a).replace(/[.*+?^${}()|[\]\/\\]/g,"\\$&").replace(/toString|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");return function(e){var g=typeof e;return"function"==g?!("prototype"in e)||c.test(b.call(e)):e&&"object"==g&&d.test(a.call(e))||!1}}(),ia=function(){var a=/(^|[^a-z0-9_$\]\)'"])(\.)([^0-9])/ig,b=Function,
d=function(a,b){return function(b){var c=K.call(arguments);c.push(null);c.push(a);c=a.apply(null,c);return void 0===c||"number"==typeof c&&isNaN(c)?void 0:c}},c={},e=0,g={},h=0,f={},l=0,r=function(){1E3<=e&&(c={});1E3<=h&&(g={});1E3<=l&&(f={})};return{createGetter:function(f){try{return c[f]?c[f]:(e++,c[f]=d(new b("____","$$interceptor","$$itself","".concat("try {","return ",f.replace(a,"$1____.$3"),";} catch (thrownError) { return undefined; }")),!0))}catch(g){return X(g),P}},createSetter:function(c){try{if(!g[c]){h++;
var f=c.replace(a,"$1____.$3");return g[c]=d(new b("____","$$$$","$$interceptor","$$itself","".concat("try {",f," = $$$$",";} catch (thrownError) { return undefined; }")))}return g[c]}catch(e){return X(e),P}},createFunc:function(c){try{return f[c]?f[c]:(l++,f[c]=d(new b("____","$$interceptor","$$itself","".concat("try {",c.replace(a,"$1____.$3"),";} catch (thrownError) { return undefined; }"))))}catch(e){return X(e),P}},resetCache:r,enableResetCacheInterval:function(){setTimeout(r,1E4)}}}(),ea=ia.createGetter,
gb=ia.createSetter,Aa=function(){var a=Object.observe&&fb(Object.observe),b=function(a){if(!E(a))return!0;var b=a.substr(0,1),c=a.length-1;return'"'!=b&&"'"!=b||a.indexOf(b,1)!=c?!1:a.substring(1,c)},d,c=function(a,c,e,h,u,y){d||(d=new Ma);var n=oa(),p;y&&(this.namespace=y,this.nsGet=y.get);this.origCode=c;E(c)||(h=e,e=c,c=null,p="object");E(a)&&(h=e,e=c,c=a,a=null);c&&a&&(p=a.hasOwnProperty(c)?"attr":"expr");c&&!a&&(p="expr");if(e)d.on(n,e,h||this,{append:[u],allowDupes:!0});if("expr"==p){c=this._parsePipes(c,
a,!0);c=this._parsePipes(c,a,!1);if(this.inputPipes||this.pipes)c=g(a,c),p=a.hasOwnProperty(c)?"attr":"expr";if(this.staticValue=b(c))p="static"}this.userData=u;this.code=c;this.id=n;this.type=p;this.obj=a;"expr"==p&&(this.getterFn=ea(c));"static"!=p||this.pipes?(this.curr=this.curr||this._getValue(),this.currCopy=sa(this.curr)?this.curr:Qa(this.curr)):(this.check=ba,this.curr=this.prev=this.staticValue)};I(c.prototype,{namespace:null,nsGet:null,staticValue:null,origCode:null,code:null,getterFn:null,
setterFn:null,id:null,type:null,obj:null,itv:null,curr:null,currCopy:null,prev:null,unfiltered:null,pipes:null,inputPipes:null,lastSetValue:null,userData:null,obsrvDelegate:null,obsrvChanged:!1,_indexArrayItems:function(a){var b="$$"+this.id,c,d,e;if(a)for(c=0,d=a.length;c<d;c++)e=a[c],!e||sa(e)||e[b]||(e[b]=oa())},_parsePipes:function(a,b,c){var d=c?">>":"|",e=c?"inputPipes":"pipes",g=c?this.onInputParamChange:this.onPipeParamChange;if(-1==a.indexOf(d))return a;a=Oa(a,d);c=c?a.pop():a.shift();var d=
[],h,p,k;p=0;for(k=a.length;p<k;p++)h=Oa(ha(a[p]),":"),this._addPipe(d,h,b,g);d.length&&(this[e]=d);return ha(c)},_addPipe:function(a,b,c,d){var g=b.shift(),h=null,n=[],p=!1,k;"!"==g.substr(0,1)&&(g=g.substr(1),p=!0);this.nsGet&&(h=this.nsGet("filter."+g,!0));h||(h=("undefined"!=typeof window?window[g]:null)||c[g]);if(s(h)){g=-1;for(k=b.length;++g<k;n.push(e(c,b[g],d,this,null,this.namespace)));a.push([h,b,n,p])}},_getValue:function(){var a;switch(this.type){case "static":a=this.staticValue;break;
case "attr":a=this.obj[this.code];break;case "expr":a=this.getterFn(this.obj);break;case "object":a=this.obj}N(a)&&(this.inputPipes||this._indexArrayItems(a),a=a.slice());this.unfiltered=a;return a=this._runThroughPipes(a,this.pipes)},_runThroughPipes:function(a,b){if(b){var c,d,e,g=b.length,n=this.obj,p,k,q;for(c=0;c<g;c++){e=b[c][1];p=b[c][3];d=[];k=-1;for(q=e.length;++k<q;d.push(h(e[k],n)));d.unshift(n);d.unshift(a);a=b[c][0].apply(null,d);p&&(a=!a)}}return a},subscribe:function(a,b,c){d.on(this.id,
a,b,c)},unsubscribe:function(a,b){return d.un(this.id,a,b)},hasPipes:function(){return null!==this.pipes},hasInputPipes:function(){return null!=this.inputPipes},getValue:function(){return this._getValue()},getUnfilteredValue:function(){return this.unfiltered||this.curr},getPrevValue:function(){return this.prev},getPrescription:function(a,b){var c;b=b||this._getValue();var d=a||[],e=b||[],g=d.length,h=e.length,p=Array(g+1);c=Array(g+1);var k,q,s,t=0;if(g==h&&0==g)c=[];else{for(k=0;k<=g;k++)p[k]=Array(h+
1),c[k]=Array(h+1),p[k][0]=k,c[k][0]="D";for(k=0;k<=h;k++)p[0][k]=k,c[0][k]="I";for(k=1;k<=g;k++)for(q=1;q<=h;q++)s=Pa(d[k-1],e[q-1])?0:1,p[k][q-1]<p[k-1][q]&&p[k][q-1]<p[k-1][q-1]+s?(p[k][q]=p[k][q-1]+1,c[k][q]="I"):p[k-1][q]<p[k-1][q-1]+s?(p[k][q]=p[k-1][q]+1,c[k][q]="D"):(p[k][q]=p[k-1][q-1]+s,c[k][q]=1==s?"R":"-");d=[];k=g;q=h;do g=c[k][q],d.push(g),"-"!=g&&t++,"R"==g||"-"==g?(k--,q--):"D"==g?k--:q--;while(0!=k||0!=q);c=d.reverse()}return c},getMovePrescription:function(a,b,c){c=c||this._getValue();
var d=a||[],e=c||[];a=this.getPrescription(a||[],c||[]);c=[];var g,h,p,k={},q,s;g=0;for(h=d.length;g<h;g++)(p=b(d[g]))&&(k[p]=g);q=0;var t={};g=0;for(h=a.length;g<h;g++)d=a[g],"D"!=d&&(p=b(e[q]),void 0!=p&&!0!==t[p]&&void 0!==(s=k[p])?(c.push(s),t[p]=!0):c.push(d),q++);return c},setValue:function(a){var b=this.type;this.lastSetValue=a;a=this._runThroughPipes(a,this.inputPipes);"attr"==b?this.obj[this.code]=a:"expr"==b?(this.setterFn||(this.setterFn=gb(this.code)),this.setterFn(this.obj,a)):"object"==
b&&(this.obj=a)},onInputParamChange:function(a,b,c){this.setValue(this.lastSetValue);c&&this.checkAll()},onPipeParamChange:function(a,b,c){this.check()},onObserverChange:function(a){var b=this.code,c,d,e;c=0;for(d=a.length;c<d;c++)if(e=a[c],e.name==b){this.obsrvChanged=!0;break}},_check:function(a){var b=this._getValue(),c=this.currCopy;return(this.obsrvDelegate?this.obsrvChanged:!Pa(c,b))?(this.curr=b,this.prev=c,this.currCopy=sa(b)?b:Qa(b),this.obsrvChanged=!1,d.trigger(this.id,b,c,a),!0):!1},check:function(a){return this._check(a)},
checkAll:function(){return this.obj.$$watchers.$checkAll()},getLastResult:function(){return this.curr},setInterval:function(a){var b=this;b.itv&&b.clearInterval();b.itv=setInterval(function(){b.check()},a)},clearInterval:function(){this.itv&&(clearInterval(this.itv),this.itv=null)},unsubscribeAndDestroy:function(a,b){var c=this.id;a&&d.un(c,a,b);return d.hasListener(c)?!1:(this.destroy(),!0)},destroy:function(){var a=this.pipes,b=this.inputPipes,c,e,g,h,n;this.itv&&this.clearInterval();if(a)for(c=
-1,e=a.length;++c<e;)for(n=a[c][2],g=-1,h=n.length;++g<h;)n[g].unsubscribeAndDestroy(this.check,this);if(b)for(c=-1,e=b.length;++c<e;)for(n=b[c][2],g=-1,h=n.length;++g<h;)n[g].unsubscribeAndDestroy(this.onInputParamChange,this);this.obsrvDelegate&&Object.unobserve(this.obj,this.obsrvDelegate);this.obj&&(this.obj.$$watchers.$codes[this.origCode]=null);d.destroyEvent(this.id);for(c in this)this.hasOwnProperty(c)&&(this[c]=null)}},!0,!1);var e=function(a,b,d,e,h,s){b=g(a,ha(b));return a?(a.$$watchers||
(a.$$watchers={$codes:{},$checkAll:function(){var a=this.$codes,b,c=0;for(b in a)a[b]&&a[b].check()&&c++;return c},$destroyAll:function(){var a=this.$codes,b;for(b in a)a[b]&&(a[b].destroy(),a[b]=null)}}),a.$$watchers.$codes[b]?a.$$watchers.$codes[b].subscribe(d,e,{append:[h],allowDupes:!0}):a.$$watchers.$codes[b]=new c(a,b,d,e,h,s),a.$$watchers.$codes[b]):new c(a,b,d,e,h,s)},g=function(a,b){if(a&&b){if(a.hasOwnProperty(b))return b;var c;if("."==b.charAt(0)&&(c=b.substr(1),a.hasOwnProperty(c)))return c}return b},
h=function(a,c){var d;return(d=b(a))?d:ea(a)(c)};c.create=e;c.unsubscribeAndDestroy=function(a,b,c,d){b=ha(b);(a=a.$$watchers?a.$$watchers.$codes:null)&&a[b]&&a[b].unsubscribeAndDestroy(c,d)&&(a[b]=null)};c.normalizeExpr=g;c.eval=h;c.usesNativeObserver=function(){return a};return c}().create,Ra=fa.add,Sa=fa.get,ia=function(){var a=[],b=!1,d=function(a,b){return a.priority<b.priority?-1:a.priority>b.priority?1:0};return Y({$class:"Directive",watcher:null,scope:null,node:null,expr:null,autoOnChange:!0,
$init:function(a,b,d){var h;d=ha(d);this.node=b;this.expr=d;this.scope=a;this.watcher=Aa(a,d,this.onChange,this,null,fa);if(this.autoOnChange&&void 0!==(h=this.watcher.getLastResult()))this.onChange(h,void 0);a.$on("destroy",this.onScopeDestroy,this)},onScopeDestroy:function(){this.$destroy()},onChange:function(){},destroy:function(){this.watcher&&this.watcher.unsubscribeAndDestroy(this.onChange,this);this.$super()}},{registerAttribute:function(c,d,g){Sa("attr."+c,!0)||(a.push({priority:d,name:c,
handler:Ra("attr."+c,g)}),b=!1)},getAttributes:function(){b||(a.sort(d),b=!0);return a},registerTag:function(a,b){Sa("tag."+a,!0)||Ra("tag."+a,b)}})}(),Wa=/-./g,Xa=function(){return function(a){if(a.dataset)return a.dataset;var b;if(void 0!==(b=F(a,"data")))return b;b=a.attributes;var d={},c,e,g;c=0;for(e=b.length;c<e;c++)g=b[c].name,0===g.indexOf("data-")&&(d[Va(g.substr(5))]=b[c].value);b=d;F(a,"data",b);return b}}();ia.registerAttribute("mjs-draggable",1E3,function(a,b,d){var c=ea(d)(a)||{},e=
Ha(b),g,h,f=function(a){h[a?"enable":"disable"]()};c.draggable=b;e.draggableIf&&(g=Aa(a,e.draggableIf,f),g.getLastResult()||(c.enabled=!1));h=new Na(c);return function(){g&&(g.unsubscribeAndDestroy(f,null),g=null);f=null;h.$destroy();b=e=c=h=null}});ia.registerAttribute("mjs-droppable",1E3,function(a,b,d){var c=ea(d)(a)||{},e=Ha(b),g,h,f=function(a){h[a?"enable":"disable"]()};c.droppable=b;e.droppableIf&&(g=Aa(a,e.droppableIf,f),g.getLastResult()||(c.enabled=!1));h=new za(c);return function(){g&&
(g.unsubscribeAndDestroy(f,null),g=null);f=null;h.$destroy();e=c=h=null}});var hb=t("","Width"),ib=t("","Height");Y({$class:"draggable.plugin.Boundary",drg:null,bndEl:null,bnd:null,$init:function(a){this.drg=a},$beforeHostInit:function(){var a=this.drg;a.on("start",this.onStart,this);a.on("correct-position",this.onPosition,this)},$afterHostInit:function(){var a=this.drg.boundary;a&&("string"==typeof a?this.bndEl=ya(a).shift():a.nodeType?this.bndEl=a:N(a)&&(this.bnd={x:a[0],y:a[1],x1:a[2],x2:a[3]}))},
cacheBoundaries:function(){var a=this.bndEl;if(a){var b=da(a);if("border-box"==J(a,"boxSizing"))this.bnd={x:b.left,y:b.top,x1:b.left+la(a),y1:b.top+ma(a)};else{var d=parseInt(J(a,"borderTop"),10),c=parseInt(J(a,"borderLeft"),10);this.bnd={x:b.left+c,y:b.top+d,x1:b.left+c+hb(a),y1:b.top+d+ib(a)}}}},onStart:function(){this.cacheBoundaries()},onPosition:function(a,b){var d=this.drg.state,c=this.bnd,e,g=0,h=0;c&&(void 0!=c.x&&0<(e=c.x-b.x)&&(g=e),void 0!=c.x1&&0>(e=c.x1-(b.x+d.w))&&(g=e),void 0!=c.y&&
0<(e=c.y-b.y)&&(h=e),void 0!=c.y1&&0>(e=c.y1-(b.y+d.h))&&(h=e),b.x+=g,b.left+=g,b.translateX+=g,b.y+=h,b.top+=h,b.translateY+=h)}});Y({$class:"draggable.plugin.Drop",drg:null,droppables:null,$init:function(a){this.drg=a;this.droppables=[]},$beforeHostInit:function(){this.drg.on("start",this.onStart,this);this.drg.on("end",this.onEnd,this);this.drg.on("drag",this.onDrag,this)},onStart:function(a,b){this.initDroppables(b)},initDroppables:function(a){var b=this.drg,d=b.drop,d=s(d)?d.call(b.$$callbackContext,
b):za.getAll(),c,e;a=a||b.lastMoveEvent||b.startEvent;c=0;for(e=d.length;c<e;c++)d[c]&&d[c].isEnabled()&&d[c].setCurrentDraggable(b)&&this.droppables.push({drp:d[c],coords:d[c].getCoords(),over:!1});this.checkDroppables(a.pageX,a.pageY)},onDrag:function(a,b,d){this.checkDroppables(d.x,d.y)},onEnd:function(){this.releaseDroppables()},checkDroppables:function(a,b){var d=this.drg,c=this.droppables,e,g;e=0;for(g=c.length;e<g;e++){var h=c[e],f=h.coords,l=h.over;f.x<=a&&f.x1>=a&&f.y<=b&&f.y1>=b?l||(h.drp.setDraggableOver(d),
h.over=!0):l&&(h.drp.setDraggableOut(d),h.over=!1)}},releaseDroppables:function(){var a=this.drg,b=this.droppables,d,c,e;d=0;for(c=b.length;d<c;d++)e=b[d],e.over&&(a.trigger("before-drop",a,e.drp),a.trigger("drop",a,e.drp),e.drp.drop(a));this.droppables=[]}});Y({$class:"draggable.plugin.Helper",drg:null,helperEl:null,$init:function(a){this.drg=a},$beforeHostInit:function(){this.drg.on("before-start",this.onBeforeStart,this);this.drg.on("start",this.onStart,this);this.drg.on("end",this.onEnd,this);
this.drg.on("end-animation",this.onEndAnimation,this)},createHelper:function(){var a=this.drg,b=a.helper,b=b.tpl?Ia(b.tpl).firstChild:b.fn.call(b.context,a);this.helperEl=a.dragEl=b},positionHelper:function(){var a=this.drg,b=a.helper,d=a.state,c=this.helperEl.style,a=b.appendTo||a.draggable.parentNode;!0!==b.manualPosition&&(c.left=d.left+"px",c.top=d.top+"px");!1!==b.appendTo&&a.appendChild(this.helperEl)},destroyHelper:function(){var a=this.helperEl;a.parentNode.removeChild(a);this.drg.helper.destroy&&
(this.helperEl=null)},onBeforeStart:function(){this.helperEl||this.createHelper()},onStart:function(){this.positionHelper()},onEnd:function(){var a=this.drg.helper.animate;this.drg.end.animate||a||this.destroyHelper();a&&xa(this.helperEl,"leave",null,!1).done(this.destroyHelper,this)},onEndAnimation:function(){this.drg.end.animate&&!this.drg.helper.animate&&this.destroyHelper()}});var jb=function(){return window.document.createElement("div").style.removeProperty?function(a,b){a.style.removeProperty(b)}:
function(a,b){a.style.removeAttribute(b)}}();Y({$class:"draggable.plugin.Placeholder",drg:null,placeholderEl:null,$init:function(a){this.drg=a},$beforeHostInit:function(){this.drg.on("before-start",this.onBeforeStart,this);this.drg.on("start",this.onStart,this);this.drg.on("before-end",this.onBeforeEnd,this);this.drg.on("end",this.onEnd,this);this.drg.on("end-animation",this.onEndAnimation,this)},onBeforeStart:function(){this.placeholderEl||this.createPlaceholder()},onStart:function(){this.positionPlaceholder()},
createPlaceholder:function(){var a=this.drg,b=a.placeholder,b=b.tpl?Ia(b.tpl).firstChild:b.fn.call(b.context,a);this.placeholderEl=a.holderEl=b},positionPlaceholder:function(){var a=this.drg,b=a.placeholder,d=a.draggable,c=a.state,e=this.placeholderEl;!0!=b.manualPosition&&(e.style.left=c.left+"px",e.style.top=c.top+"px");b.appendTo?b.appendTo.appendChild(e):d.parentNode.insertBefore(e,d);a.$hasPlugin("draggable.plugin.Helper")&&(d.style.display="none")},destroyPlaceholder:function(){var a=this.drg,
b=this.placeholderEl;b&&b.parentNode&&(b.parentNode.removeChild(b),this.drg.placeholder.destroy&&(this.placeholderEl=null),a.$hasPlugin("draggable.plugin.Helper")&&jb(a.draggable,"display"))},onBeforeEnd:function(){var a=this.drg;a.$hasPlugin("draggable.plugin.Helper")&&!a.end.restore&&(this.destroyPlaceholder(),a.holderEl=a.draggable)},onEnd:function(){this.drg.end.animate||this.destroyPlaceholder()},onEndAnimation:function(){this.drg.end.animate&&this.destroyPlaceholder()}});t={};t.Draggable=Na;
t.Droppable=za;t.onReady=function(a,b){var d=!1,c=!0,e=b||window,g,h,f=function(b){if("readystatechange"!=b.type||"complete"==h.readyState)ua("load"==b.type?e:h,b.type,f),!d&&(d=!0)&&a.call(e,b.type||b)},l=function(){try{g.doScroll("left")}catch(a){setTimeout(l,50);return}f("poll")};h=e.document;g=h.documentElement;if("complete"==h.readyState)a.call(e,"lazy");else{if(h.createEventObject&&g.doScroll){try{c=!e.frameElement}catch(r){}c&&l()}W(h,"DOMContentLoaded",f);W(h,"readystatechange",f);W(e,"load",
f)}};"undefined"!=typeof global?global.MetaphorJs=t:window.MetaphorJs=t})();
